<div class="bg-white p-6 rounded-lg shadow-md hover:shadow-lg transition-shadow duration-300 dark:bg-gray-800">
  <div class="flex flex-col md:flex-row">
    <div class="md:w-1/3  mb-4 md:mb-0 md:mr-4">
      <div class="aspect-w-4 aspect-h-3">
        <img src="<%= @item.image? ? @item.image : asset_path('default_item_img.jpg') %>" alt="<%= @item.name %>" class="object-cover rounded-md">
      </div>
    </div>
    <div class="md:w-2/3 w-full">
      <div class="flex justify-between items-center mb-2">
        <h3 class="text-2xl font-semibold text-gray-900 dark:text-gray-100 mb-2">
          <%= @item.name %>
        </h3>
        <% if current_user && (@item.collection.user == current_user || current_user.admin?) %>
          <div class="relative">
            <button id="dropdownButton-<%= @item.id %>" data-dropdown-toggle="dropdown-<%= @item.id %>" class="inline-block text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 focus:ring-4 focus:outline-none focus:ring-gray-200 dark:focus:ring-gray-700 rounded-lg text-sm p-1.5" type="button">
              <span class="sr-only">Open dropdown</span>
              <svg class="w-5 h-5" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 16 3">
                <path d="M2 0a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3Zm6.041 0a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM14 0a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3Z"/>
              </svg>
            </button>
            <!-- Dropdown menu -->
            <div id="dropdown-<%= @item.id %>" class="z-10 hidden text-base list-none bg-white divide-y divide-gray-100 rounded-lg shadow w-44 dark:bg-gray-700 absolute right-0 mt-2">
              <ul class="py-2" aria-labelledby="dropdownButton-<%= @item.id %>">
                <li>
                  <%= link_to edit_collection_item_path(@item.collection, @item), class: "block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600 dark:text-gray-200 dark:hover:text-white" do %>
                    Edit
                  <% end %>
                </li>
                <li>
                  <%= form_with(model: @item, url: collection_item_path(@item.collection, @item), method: :delete, data: { turbo_confirm: 'Are you sure?' }, class: "inline-block") do %>
                    <%= submit_tag 'Delete', class: "block px-4 py-2 text-sm text-red-600 hover:bg-gray-100 dark:hover:bg-gray-600 dark:text-gray-200 dark:hover:text-white" %>
                  <% end %>
                </li>
              </ul>
            </div>
          </div>
        <% end %>
      </div>
      <p class="text-sm text-gray-600 dark:text-gray-400 mb-4"><%= @item.description %></p>
      <ul class="text-sm text-gray-600 dark:text-gray-400 mb-4">
        <% @custom_fields.each do |custom_field| %>
          <% custom_field_value = @item.item_custom_field_values.find_by(custom_field_id: custom_field.id) %>
          <li><strong><%= custom_field.label %>:</strong> <%= custom_field_value.value if custom_field_value %></li>
        <% end %>
      </ul>
      <% if @item.tags.any? %>
        <div class="flex flex-wrap mb-4">
          <h4 class="text-lg font-semibold text-gray-900 dark:text-gray-100 mr-2">Tags:</h4>
          <% @item.tags.each do |tag| %>
            <span class="bg-gray-200 dark:bg-gray-700 px-2 py-1 rounded text-sm mr-2 mb-2"><%= tag %></span>
          <% end %>
        </div>
      <% end %>
      <p class="text-sm text-gray-500 dark:text-gray-300 mb-2">
        Collection: <%= link_to @item.collection.name, collection_path(@item.collection), class: "text-blue-500 hover:underline" %>
      </p>
      <% if user_signed_in? %>
        <p class="text-xs text-gray-500 dark:text-gray-300">
          Added by <%= link_to @item.collection.user.username, user_profile_path(@item.collection.user), class: "text-blue-500 hover:underline" %>
        </p>
      <% end %>
      <p class="text-xs text-gray-500 dark:text-gray-300 mb-4">
        <%= @item.created_at.strftime("%d.%m.%Y at %H:%M:%S") %>
      </p>
      <div>
        <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M458.4 64.3C400.6 15.7 311.3 23 256 79.3 200.7 23 111.4 15.6 53.6 64.3-21.6 127.6-10.6 230.8 43 285.5l175.4 178.7c10 10.2 23.4 15.9 37.6 15.9 14.3 0 27.6-5.6 37.6-15.8L469 285.6c53.5-54.7 64.7-157.9-10.6-221.3zm-23.6 187.5L259.4 430.5c-2.4 2.4-4.4 2.4-6.8 0L77.2 251.8c-36.5-37.2-43.9-107.6 7.3-150.7 38.9-32.7 98.9-27.8 136.5 10.5l35 35.7 35-35.7c37.8-38.5 97.8-43.2 136.5-10.6 51.1 43.1 43.5 113.9 7.3 150.8z"></path></svg>
      </div>
    </div>
  </div>
  <div class="flex flex-col mt-8 lg:flex-row lg:space-x-8 border-t border-gray-100 dark:border-gray-700">
    <!-- Comments Section -->
    <div class="w-full lg:w-2/3 bg-white dark:bg-gray-800 py-6 lg:py-16 antialiased">
      <div class="max-w-2xl mx-auto px-4">
        <div class="flex justify-between items-center mb-6">
          <h2 class="text-lg lg:text-2xl font-bold text-gray-900 dark:text-white">Discussion (20)</h2>
        </div>
        <article class="p-6 text-base bg-white rounded-lg dark:bg-gray-900 mb-4">
          <footer class="flex justify-between items-center mb-2">
            <div class="flex items-center">
              <p class="inline-flex items-center mr-3 text-sm text-gray-900 dark:text-white font-semibold">
                <img class="mr-2 w-6 h-6 rounded-full" src="https://flowbite.com/docs/images/people/profile-picture-2.jpg" alt="Michael Gough">
                Michael Gough
              </p>
              <p class="text-sm text-gray-600 dark:text-gray-400">
                <time pubdate datetime="2022-02-08" title="February 8th, 2022">Feb. 8, 2022</time>
              </p>
            </div>
            <button id="dropdownComment1Button" data-dropdown-toggle="dropdownComment1" class="inline-flex items-center p-2 text-sm font-medium text-center text-gray-500 dark:text-gray-400 bg-white rounded-lg hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-gray-50 dark:bg-gray-900 dark:hover:bg-gray-700 dark:focus:ring-gray-600" type="button">
              <svg class="w-4 h-4" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 16 3">
                <path d="M2 0a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3Zm6.041 0a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM14 0a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3Z"/>
              </svg>
              <span class="sr-only">Comment settings</span>
            </button>
            <!-- Dropdown menu -->
            <div id="dropdownComment1" class="hidden z-10 w-36 bg-white rounded divide-y divide-gray-100 shadow dark:bg-gray-700 dark:divide-gray-600">
              <ul class="py-1 text-sm text-gray-700 dark:text-gray-200" aria-labelledby="dropdownMenuIconHorizontalButton">
                <li><a href="#" class="block py-2 px-4 hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white">Edit</a></li>
                <li><a href="#" class="block py-2 px-4 hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white">Remove</a></li>
                <li><a href="#" class="block py-2 px-4 hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white">Report</a></li>
              </ul>
            </div>
          </footer>
          <p class="text-gray-500 dark:text-gray-400">Very straight-to-point article. Really worth time reading. Thank you! But tools are just the instruments for the UX designers. The knowledge of the design tools are as important as the creation of the design strategy.</p>
        </article>
      </div>
    </div>
    <!-- Comment Form Section -->
    <div class="w-full lg:w-1/3 bg-white dark:bg-gray-800 py-6 lg:py-16 antialiased">
      <div class="max-w-xl mx-auto px-4">
        <form class="mb-6">
          <div class="py-2 px-4 mb-4 bg-white rounded-lg rounded-t-lg border border-gray-200 dark:bg-gray-800 dark:border-gray-700">
            <label for="comment" class="sr-only">Your comment</label>
            <textarea id="comment" rows="6" class="px-0 w-full text-sm text-gray-900 border-0 focus:ring-0 focus:outline-none dark:text-white dark:placeholder-gray-400 dark:bg-gray-800" placeholder="Write a comment..." required></textarea>
          </div>
          <button type="submit" class="inline-flex items-center py-2.5 px-4 text-xs font-medium text-center text-white bg-blue-600 rounded-lg focus:ring-4 focus:ring-blue-300 dark:focus:ring-blue-800 hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600">
            Post comment
          </button>
        </form>
      </div>
    </div>
  </div>
</div>
